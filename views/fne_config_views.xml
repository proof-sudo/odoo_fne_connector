<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- ========================================== -->
        <!-- Vue Formulaire - Configuration FNE         -->
        <!-- ========================================== -->
        <record id="view_fne_config_settings_form" model="ir.ui.view">
            <field name="name">res.config.settings.view.form.inherit.fne</field>
            <field name="model">res.config.settings</field>
            <field name="priority" eval="1"/>
            <field name="inherit_id" ref="base.res_config_settings_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('settings')]" position="inside">
                    <div class="app_settings_block" data-string="FNE" string="FNE - Facturation √âlectronique" data-key="fne">
                        
                        <!-- Titre -->
                        <h2>Configuration de la Facturation √âlectronique Norm√©e (FNE)</h2>
                        
                        <!-- Mode de fonctionnement -->
                        <div class="row mt16 o_settings_container">
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="fne_mode" widget="radio" options="{'horizontal': true}"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="fne_mode" string="Environnement"/>
                                    <div class="text-muted">
                                        Test : Environnement de d√©veloppement<br/>
                                        Production : Environnement r√©el DGI
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bandeau d'alerte selon le mode -->
                        <div class="row mt16">
                            <div class="col-xs-12">
                                <div class="alert alert-warning" role="alert" attrs="{'invisible': [('fne_mode', '!=', 'test')]}">
                                    <strong>‚ö†Ô∏è Mode Test activ√©</strong> - Les factures ne seront pas envoy√©es √† la DGI de production.
                                </div>
                                <div class="alert alert-danger" role="alert" attrs="{'invisible': [('fne_mode', '!=', 'prod')]}">
                                    <strong>üî¥ Mode Production</strong> - Les factures seront envoy√©es directement √† la DGI.
                                </div>
                            </div>
                        </div>

                        <!-- Connexion API -->
                        <h3 class="mt32">üîê Connexion API</h3>
                        <div class="row mt16 o_settings_container">
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="fne_api_key" string="Cl√© API FNE"/>
                                    <div class="text-muted">
                                        Cl√© d'authentification fournie par la DGI
                                    </div>
                                    <div class="content-group mt16">
                                        <field name="fne_api_key" password="True" placeholder="Entrez votre cl√© API..." class="oe_inline"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="fne_auto_send"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="fne_auto_send" string="Envoi automatique"/>
                                    <div class="text-muted">
                                        Certification automatique apr√®s validation des factures
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- URLs des services -->
                        <div class="row mt16 o_settings_container">
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="fne_test_url" string="URL Test"/>
                                    <div class="text-muted">
                                        URL de l'API FNE en environnement de test
                                    </div>
                                    <div class="content-group mt16">
                                        <field name="fne_test_url" placeholder="http://54.247.95.108/ws"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="fne_prod_url" string="URL Production"/>
                                    <div class="text-muted">
                                        URL de l'API FNE en environnement de production
                                    </div>
                                    <div class="content-group mt16">
                                        <field name="fne_prod_url" placeholder="https://www.services.fne.dgi.gouv.ci/ws"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Configuration m√©tier -->
                        <h3 class="mt32">üè¢ Configuration M√©tier</h3>
                        <div class="row mt16 o_settings_container">
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="fne_point_de_vente" string="Point de Vente"/>
                                    <div class="text-muted">
                                        Identifiant de votre √©tablissement (ex: SIEGE NEURONES)
                                    </div>
                                    <div class="content-group mt16">
                                        <field name="fne_point_de_vente" placeholder="SIEGE NEURONES"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Footer personnalis√© -->
                        <div class="row mt16 o_settings_container">
                            <div class="col-xs-12 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="fne_footer" string="Pied de page FNE"/>
                                    <div class="text-muted">
                                        Message personnalis√© affich√© sur les factures certifi√©es
                                    </div>
                                    <div class="content-group mt16">
                                        <field name="fne_footer" widget="html" placeholder="&lt;p&gt;Merci pour votre confiance&lt;/p&gt;"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Aide et informations -->
                        <div class="row mt32">
                            <div class="col-xs-12">
                                <div class="alert alert-info" role="alert">
                                    <h4 class="alert-heading">
                                        <i class="fa fa-info-circle"/> Comment obtenir votre cl√© API ?
                                    </h4>
                                    <ol class="mb-0">
                                        <li>Contactez la Direction G√©n√©rale des Imp√¥ts (DGI) de C√¥te d'Ivoire</li>
                                        <li>Demandez votre inscription au service de Facturation √âlectronique Norm√©e</li>
                                        <li>Recevez vos identifiants pour les environnements Test et Production</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                    </div>
                </xpath>
            </field>
        </record>

        <!-- ========================================== -->
        <!-- Action                                     -->
        <!-- ========================================== -->
        <record id="action_fne_config_settingss" model="ir.actions.act_window">
            <field name="name">Configuration FNE</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
            <field name="context">{'module': 'odoo_fne_connector'}</field>
        </record>

        <!-- ========================================== -->
        <!-- Menu                                       -->
        <!-- ========================================== -->
        <menuitem id="menu_fne_config_root"
                  name="FNE"
                  parent="base.menu_administration"
                  sequence="50"
                  groups="base.group_system"/>

        <menuitem id="menu_fne_config_settings"
                  name="Param√®tres FNE"
                  parent="menu_fne_config_root"
                  action="action_fne_config_settingss" 
                  sequence="10"
                  groups="base.group_system"/>

    </data>
</odoo>
